!function(){"use strict";function e(){const e=document.getElementById("local-time");if(!e)return;const t=(new Date).toLocaleTimeString("en-US",{timeZone:"Europe/Istanbul",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});e.textContent=t}e(),setInterval(e,1e3);const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target,n=o.getAttribute("data-src");if(n&&!o.querySelector("iframe")){const e=document.createElement("iframe");e.src=n,e.width="100%",e.height="100%",e.frameBorder="0",e.loading="lazy",e.setAttribute("importance","low");const r=o.querySelector(".loading-placeholder");r?(r.style.opacity="0",r.style.transition="opacity 0.3s",setTimeout(()=>{o.innerHTML="",o.appendChild(e)},300)):o.appendChild(e),t.unobserve(o)}}})},{rootMargin:"200px"});document.querySelectorAll(".lazy-load-container").forEach(e=>{t.observe(e)});const o=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target,n=o.getAttribute("data-airport"),r=o.getAttribute("data-type");if(n&&r&&!o.querySelector("script")){const e=document.createElement("script");e.src=`https://fids.flightradar.live/widgets/airport/${n}/${r}`,e.async=!0,e.onload=()=>{const e=o.querySelector(".loading-placeholder");e&&(e.style.display="none")},o.appendChild(e),t.unobserve(o)}}})},{rootMargin:"200px"});document.querySelectorAll(".lazy-load-widget").forEach(e=>{o.observe(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)return;e.preventDefault();const o=document.querySelector(t);if(o){const e=document.querySelector(".navbar").offsetHeight,t=o.getBoundingClientRect().top+window.pageYOffset-e-20;window.scrollTo({top:t,behavior:"smooth"})}})});let n=0,r=!1;const a=document.querySelector(".navbar");function s(e){e<=0?(a.classList.remove("navbar-scrolled"),a.style.transform="translateY(0)",a.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.1)"):(a.classList.add("navbar-scrolled"),a.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.15)",window.innerWidth<=768&&(e>n&&e>100?a.style.transform="translateY(-100%)":e<n&&(a.style.transform="translateY(0)"))),n=e,r=!1}function i(){const e=document.getElementById("arrivals-count"),t=document.getElementById("departures-count");if(!e||!t)return;const o=(new Date).getHours();let n=250;o>=6&&o<=10||o>=18&&o<=22?n=350:o>=0&&o<=5&&(n=150);const r=n+Math.floor(50*Math.random()),a=n+Math.floor(50*Math.random());c(e,0,r,2e3),c(t,0,a,2e3)}function c(e,t,o,n){let r=null;const a=s=>{r||(r=s);const i=Math.min((s-r)/n,1),c=Math.floor(i*(o-t)+t);e.textContent=c,i<1&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}function l(){const e=document.querySelector(".status-badge"),t=document.querySelector(".status-text"),o=document.querySelector(".status-icon");if(!e||!t||!o)return;const n=(new Date).getHours();n>=1&&n<=5?(t.textContent="Low Activity",o.textContent="üåô",e.style.background="linear-gradient(135deg, #f39c12, #e67e22)"):(t.textContent="Airport Operational",o.textContent="‚úàÔ∏è",e.style.background="linear-gradient(135deg, #e74c3c, #c0392b)")}if(window.addEventListener("scroll",()=>{const e=window.pageYOffset;r||(window.requestAnimationFrame(()=>{s(e)}),r=!0)},{passive:!0}),i(),setInterval(i,3e5),l(),setInterval(l,6e5),"PerformanceObserver"in window){const e=new PerformanceObserver(e=>{const t=e.getEntries(),o=t[t.length-1];console.log("LCP:",o.renderTime||o.loadTime)});try{e.observe({entryTypes:["largest-contentful-paint"]})}catch(e){console.warn("LCP observation not supported")}}window.addEventListener("error",e=>{if("IFRAME"===e.target.tagName){console.warn("Failed to load iframe:",e.target.src);const t=e.target.parentElement;if(t&&t.classList.contains("lazy-load-container")){const e=document.createElement("div");e.className="loading-placeholder",e.innerHTML='<p style="color: #ef4444;">Failed to load content. Please refresh the page.</p>',t.innerHTML="",t.appendChild(e)}}},!0);const d=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".section").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease-out, transform 0.6s ease-out",d.observe(e)}),console.log("%cIGASTATUS","font-size: 24px; font-weight: bold; color: #e74c3c;"),console.log("%cIstanbul Airport Live Status","font-size: 14px; color: #6b7280;"),console.log("%cMade with ‚ù§Ô∏è for Aviation Enthusiasts","font-size: 12px; color: #f39c12;"),console.log("%cGitHub: https://github.com/igastatus/igastatus-ai","font-size: 11px; color: #6b7280;"),window.location.search.includes("debug=true")&&(document.body.style.border="3px solid red",console.log("Debug mode enabled"),console.log("Lazy load containers:",document.querySelectorAll(".lazy-load-container").length),console.log("Flight widgets:",document.querySelectorAll(".lazy-load-widget").length))}();